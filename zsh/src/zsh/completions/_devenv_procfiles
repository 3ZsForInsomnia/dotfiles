#compdef bpfebe ctbpfebe

# Completion for development environment procfile runners

_devenv_envs() {
  local -a envs
  envs=(
    'local:Local environment'
    'dev:Development environment'
    'qat:QAT environment'
    'uat:UAT environment'
    'preprod:Pre-production environment'
    'prod:Production environment'
  )
  _describe 'environment' envs
}

_devenv_procfiles_completion() {
  local context state state_descr line
  typeset -A opt_args

  case "$service" in
    bpfebe)
      _arguments \
        '1:backend environment:_devenv_envs' \
        '2:database environment (optional):_devenv_envs' \
        && return 0
      ;;
    ctbpfebe)
      _arguments \
        '1:environment:_devenv_envs' \
        && return 0
      ;;
  esac
}

_devenv_procfiles_completion "$@"
