#compdef ls lss lsg lsd lsr lsrg

# Completion for ls aliases that use eza under the hood
# Since ls is aliased to eza, we need to provide proper file/directory completion

function _ls_aliases() {
  local cmd="$words[1]"
  
  case "$cmd" in
    ls)
      # ls='eza -lahUm -F --icons --git'
      # Standard ls - complete files and directories
      _files
      ;;
    
    lss)
      # lss - enhanced ls with filtering and sorting
      # Options: -d <days>, -n <num>, -c (created), -s (size), --rev (reverse), -h (help)
      if (( CURRENT == 2 )) || [[ "${words[CURRENT]}" == -* ]]; then
        local -a lss_options
        lss_options=(
          '-d[Filter to files modified/created in last N days]:days'
          '-n[Limit output to N results]:number'
          '-c[Use creation date for filtering and sorting]'
          '-s[Sort by size (largest first)]'
          '--rev[Reverse sort order]'
          '-h[Show help message]'
          '--help[Show help message]'
        )
        _arguments -s -S $lss_options && return 0
      fi
      # Complete with files and directories
      _files
      ;;
    
    lsg)
      # lsg='ls G' (ls | grep pattern)
      # First arg is grep pattern, no file completion needed
      if (( CURRENT == 2 )); then
        _message "grep pattern"
        return 0
      fi
      ;;
    
    lsd)
      # lsd='eza -lahUmD -F --icons -I ".git"'
      # Directories only - should complete directories
      _directories
      ;;
    
    lsr)
      # lsr='lsrFunc' - recursive ls with optional depth
      # lsrFunc accepts optional depth as first argument
      if (( CURRENT == 2 )); then
        _message "optional depth (number)"
        return 0
      else
        _files
      fi
      ;;
    
    lsrg)
      # lsrg='eza -lahRTUm -F --git -I ".git" --icons G'
      # Recursive ls with grep pattern
      if (( CURRENT == 2 )); then
        _message "grep pattern"
        return 0
      fi
      ;;
  esac
}

_ls_aliases
